(function(a,b){function f(a,b){return b?c(a&255)+f(a>>8,b-1):""}function g(a,b){return b?g(a>>8,b-1)+c(255-a&255):""}function h(a,b,c){return c?g(a,b):f(a,b)}function i(a,c){var d=a.length,e=d-1,f=0,g=b.pow,h;if(c)for(h=0;h<d;h++)f+=(255-a.charCodeAt(h))*g(256,e-h);else for(h=0;h<d;h++)f+=a.charCodeAt(h)*g(256,h);return f}function j(a,c,d,e){var f=b.pow,g=b.floor,h=j.convertFromBinary,i=j.convertToBinary,k=a/8,l=f(2,a),m=l/2,n=m-1,o=1/m,p=1/n;return e?d?c?function(a,b){return a=g(a<0?a*m+l:a*n),i(a,k,b)}:function(a,b){return i(g(a*n),k,b)}:c?function(a,b){return i(a<0?a+l:a,k,b)}:function(a,b){return i(a,k,b)}:d?c?function(a,b){var c=h(a,b);return c>n?(c-l)*o:c*p}:function(a,b){return h(a,b)*p}:c?function(a,b){var c=h(a,b);return c>n?c-l:c}:function(a,b){return h(a,b)}}var c=String.fromCharCode,d=!0,e=!1;j.convertToBinary=h,j.convertFromBinary=i,j.fromQ32=j(32,d,d,d),j.toQ32=j(32,d,d,e),j.fromQ24=j(24,d,d,d),j.toQ24=j(24,d,d,e),j.fromQ16=j(16,d,d,d),j.toQ16=j(16,d,d,e),j.fromQ8=j(8,d,d,d),j.toQ8=j(8,d,d,e),j.fromInt32=j(32,d,e,d),j.toInt32=j(32,d,e,e),j.fromInt16=j(16,d,e,d),j.toInt16=j(16,d,e,e),j.fromInt8=j(8,d,e,d),j.toInt8=j(8,d,e,e),j.fromUint32=j(32,e,e,d),j.toUint32=j(32,e,e,e),j.fromUint16=j(16,e,e,d),j.toUint16=j(16,e,e,e),j.fromUint8=j(8,e,e,d),j.toUint8=j(8,e,e,e),a.Binary=j})(this,Math),function(a,b){function c(a){this.data=a}function g(a,b,c){var e=b/8;d["read"+a+b]=function(a){return c(this.read(e),a)}}var d=c.prototype={read:function(a){var b=this,c=b.data.substr(0,a);return b.skip(a),c},skip:function(a){var b=this,c=b.data=b.data.substr(a);return b.pointer+=a,c.length},readBuffer:function(a,b,c){var d=this,e="read"+c+b,f=b/8,g=a.length,h=0;while(d.data&&h<g)a[h++]=d[e]();return h}},e,f;for(e in b)f=/to([a-z]+)([0-9]+)/i.exec(e),f&&g(f[1],f[2],b[e]);a.Stream=c,c.newType=g}(this,this.Binary),this.PCMData=function(a,b){function c(a){return(typeof a=="string"?c.decode:c.encode)(a)}return c.decodeFrame=function(a,c,d){if(c===8){var e=new(window.Int8Array||Array)(d.length);(new b(a)).readBuffer(e,8,"Int");for(c=0;c<d.length;c++)d[c]=e[c]}else(new b(a)).readBuffer(d,c,"Q");return d},c.encodeFrame=function(b,c){var d=a[(c===8?"fromInt":"fromQ")+c],e=b.length,f="",g;if(c===8)for(g=0;g<e;g++)f+=d(b[g]);else for(g=0;g<e;g++)f+=d(b[g]);return f},c.decode=function(a,d){function B(){s=e.read(4),t=e.readUint32(),v=e.read(t),x=z[s]=z[s]||[],s==="data"?(u=~~(t/q),w=A.data=new(typeof Float32Array!="undefined"?Float32Array:Array)(u),c.decodeFrame(v,q*8,w)):x.push(v),d&&(e.data?setTimeout(B,1):d(A))}var e=new b(a),f=e.read(4),g=e.readUint32();e=new b(e.read(g));var h=e.read(4),i=e.read(4),j=e.readUint32(),k=new b(e.read(j)),l=k.readUint16(),m=k.readUint16(),n=k.readUint32(),o=k.readUint32(),p=k.readUint16(),q=p/m,r=k.readUint16(),s,t,u,v,w,x,y,z={},A={channelCount:m,bytesPerSample:p/m,sampleRate:o/p,chunks:z,data:w};if(d)e.data?B():d(A);else while(e.data)B();return A},c.encode=function(b,d){var e=a.fromUint32,f=a.fromUint16,g=b.data,h=b.sampleRate,i=b.format||1,j=b.channelCount||1,k=b.bytesPerSample||1,l=k*8,m=j*k,n=h*m,o=g.length,p=o*k,q=Math.pow(2,l-1)-1,r=[],s="",t,u,v,w;r.push("fmt "+e(16)+f(i)+f(j)+e(h)+e(n)+f(m)+f(l)),r.push("data"+e(p)+c.encodeFrame(g,l)),w=b.chunks;if(w)for(u in w)if(w.hasOwnProperty(u)){t=w[u];for(v=0;v<t.length;v++)s=t[v],r.push(u+e(s.length)+s)}return r=r.join(""),r="RIFF"+e(r.length)+"WAVE"+r,d&&setTimeout(function(){d(r)},1),r},c}(this.Binary,this.Stream),function(a){var b={};b.BIAS=132,b.CLIP=32635,b.tables={ulaw:{compress:[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],decompress:[-32124,-31100,-30076,-29052,-28028,-27004,-25980,-24956,-23932,-22908,-21884,-20860,-19836,-18812,-17788,-16764,-15996,-15484,-14972,-14460,-13948,-13436,-12924,-12412,-11900,-11388,-10876,-10364,-9852,-9340,-8828,-8316,-7932,-7676,-7420,-7164,-6908,-6652,-6396,-6140,-5884,-5628,-5372,-5116,-4860,-4604,-4348,-4092,-3900,-3772,-3644,-3516,-3388,-3260,-3132,-3004,-2876,-2748,-2620,-2492,-2364,-2236,-2108,-1980,-1884,-1820,-1756,-1692,-1628,-1564,-1500,-1436,-1372,-1308,-1244,-1180,-1116,-1052,-988,-924,-876,-844,-812,-780,-748,-716,-684,-652,-620,-588,-556,-524,-492,-460,-428,-396,-372,-356,-340,-324,-308,-292,-276,-260,-244,-228,-212,-196,-180,-164,-148,-132,-120,-112,-104,-96,-88,-80,-72,-64,-56,-48,-40,-32,-24,-16,-8,0,32124,31100,30076,29052,28028,27004,25980,24956,23932,22908,21884,20860,19836,18812,17788,16764,15996,15484,14972,14460,13948,13436,12924,12412,11900,11388,10876,10364,9852,9340,8828,8316,7932,7676,7420,7164,6908,6652,6396,6140,5884,5628,5372,5116,4860,4604,4348,4092,3900,3772,3644,3516,3388,3260,3132,3004,2876,2748,2620,2492,2364,2236,2108,1980,1884,1820,1756,1692,1628,1564,1500,1436,1372,1308,1244,1180,1116,1052,988,924,876,844,812,780,748,716,684,652,620,588,556,524,492,460,428,396,372,356,340,324,308,292,276,260,244,228,212,196,180,164,148,132,120,112,104,96,88,80,72,64,56,48,40,32,24,16,8,0]},alaw:{compress:[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],decompress:[-5504,-5248,-6016,-5760,-4480,-4224,-4992,-4736,-7552,-7296,-8064,-7808,-6528,-6272,-7040,-6784,-2752,-2624,-3008,-2880,-2240,-2112,-2496,-2368,-3776,-3648,-4032,-3904,-3264,-3136,-3520,-3392,-22016,-20992,-24064,-23040,-17920,-16896,-19968,-18944,-30208,-29184,-32256,-31232,-26112,-25088,-28160,-27136,-11008,-10496,-12032,-11520,-8960,-8448,-9984,-9472,-15104,-14592,-16128,-15616,-13056,-12544,-14080,-13568,-344,-328,-376,-360,-280,-264,-312,-296,-472,-456,-504,-488,-408,-392,-440,-424,-88,-72,-120,-104,-24,-8,-56,-40,-216,-200,-248,-232,-152,-136,-184,-168,-1376,-1312,-1504,-1440,-1120,-1056,-1248,-1184,-1888,-1824,-2016,-1952,-1632,-1568,-1760,-1696,-688,-656,-752,-720,-560,-528,-624,-592,-944,-912,-1008,-976,-816,-784,-880,-848,5504,5248,6016,5760,4480,4224,4992,4736,7552,7296,8064,7808,6528,6272,7040,6784,2752,2624,3008,2880,2240,2112,2496,2368,3776,3648,4032,3904,3264,3136,3520,3392,22016,20992,24064,23040,17920,16896,19968,18944,30208,29184,32256,31232,26112,25088,28160,27136,11008,10496,12032,11520,8960,8448,9984,9472,15104,14592,16128,15616,13056,12544,14080,13568,344,328,376,360,280,264,312,296,472,456,504,488,408,392,440,424,88,72,120,104,24,8,56,40,216,200,248,232,152,136,184,168,1376,1312,1504,1440,1120,1056,1248,1184,1888,1824,2016,1952,1632,1568,1760,1696,688,656,752,720,560,528,624,592,944,912,1008,976,816,784,880,848]}},b.encode=function(a,c){c=c||{};var d=new ArrayBuffer(a.byteLength/2),e=new Int8Array(d),f=c.alaw?"alaw":"ulaw",g=b[f];for(var h=0;h<a.byteLength/2;h++)e[h]=g(a[h]);return e},b.decode=function(a,c){c=c||{};var d=!!c.floating_point,e=new ArrayBuffer(a.byteLength*(d?4:2)),f=d?new Float32Array(e):new Int16Array(e),g=b[(c.alaw?"alaw":"ulaw")+"_dec"],h;for(var i=0;i<a.byteLength;i++)h=g(a[i]),f[i]=d?h/32768:h;return f},b.alaw=function(a){var c=new ArrayBuffer(2),d=new ArrayBuffer(1),e=new Int16Array(c),f=new Int8Array(d),g,h,i,j;return g=~a>>8&128,g!=128&&(e[0]=-a,a=e[0]),a>b.CLIP&&(a=b.CLIP),a>=256?(h=b.tables.alaw.compress[a>>8&127],i=a>>h+3&15,f[0]=h<<4|i):f[0]=a>>4,f[0]^=g^85,f[0]},b.alaw_dec=function(a){var c=new ArrayBuffer(2),d=new Int8Array(c),e=b.tables.alaw.decompress[a&255];return d[0]=e,d[1]=e>>8,(new Int16Array(d.buffer))[0]},b.ulaw=function(a){var c=new ArrayBuffer(2),d=new ArrayBuffer(1),e=new Int16Array(c),f=new Int8Array(d),g,h,i;a<0?(e[0]=b.BIAS-a,a=e[0],g=127):(a+=b.BIAS,g=255);var h=b.tables.ulaw.compress[a>>8&127];return h>=8?127^g:(f[0]=h<<4|a>>h+3&15,f[0]^g)},b.ulaw_dec=function(a){var c=new ArrayBuffer(2),d=new Int8Array(c),e=b.tables.ulaw.decompress[a&255];return d[0]=e,d[1]=e>>8,(new Int16Array(d.buffer))[0]},b.ulaw_dec_slow=function(a){var c=new ArrayBuffer(2),d=new Int16Array(c);d[0]=~a,a=d[0],t=((a&15)<<3)+b.BIAS,t<<=(a&112)>>4;var e=(a&128)==128,f=new ArrayBuffer(2),g=new Int16Array(f);return g[0]=e?b.BIAS-t:t-b.BIAS,g[0]},a.G711=b,a.version="0.0.1"}(typeof exports!="undefined"?module.exports:window);